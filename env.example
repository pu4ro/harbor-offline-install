# ============================================================================
# Harbor 오프라인 설치 환경 변수 설정 파일
# ============================================================================
# 이 파일을 복사하여 .env 파일을 생성하고 필요에 따라 수정하세요:
#   cp env.example .env
#   vi .env
# ============================================================================

# ----------------------------------------------------------------------------
# Harbor 버전 설정
# ----------------------------------------------------------------------------

# Harbor 버전 (GitHub 릴리즈 태그)
# 최신 버전: https://github.com/goharbor/harbor/releases
# 예: v2.11.1, v2.10.2, v2.9.4
HARBOR_VERSION=v2.11.1

# ----------------------------------------------------------------------------
# Docker Compose 설정
# ----------------------------------------------------------------------------

# Docker Compose 버전
# 최신 버전: https://github.com/docker/compose/releases
# 예: v2.24.5, v2.23.3
DOCKER_COMPOSE_VERSION=v2.24.5

# ----------------------------------------------------------------------------
# Harbor 기본 설정
# ----------------------------------------------------------------------------

# Harbor 서버 호스트명 또는 IP 주소
# 설치 후 harbor.yml에 적용될 기본값
# 예: 192.168.1.100, harbor.example.com
HARBOR_HOSTNAME=192.168.1.100

# Harbor HTTP 포트
HARBOR_HTTP_PORT=80

# Harbor HTTPS 포트 (HTTPS 사용 시)
HARBOR_HTTPS_PORT=443

# Harbor 관리자 초기 비밀번호
# 보안을 위해 반드시 변경하세요!
# 최소 8자 이상, 대소문자, 숫자 포함 권장
HARBOR_ADMIN_PASSWORD=Harbor12345

# Harbor 데이터 저장 경로
# 충분한 디스크 공간이 있는 경로를 지정하세요 (최소 100GB 권장)
HARBOR_DATA_VOLUME=/data

# ----------------------------------------------------------------------------
# Harbor 네트워크 설정
# ----------------------------------------------------------------------------

# Harbor 내부 네트워크 IPAM 설정 사용 여부 (true/false)
# true로 설정 시 docker-compose.yml에서 네트워크 서브넷/게이트웨이 설정
# false로 설정하거나 비워두면 Docker 기본 네트워크 설정 사용
ENABLE_HARBOR_NETWORK_IPAM=false

# Harbor 네트워크 서브넷 (CIDR 표기법)
# 예: 192.168.101.0/24, 172.20.0.0/16
# ENABLE_HARBOR_NETWORK_IPAM=true일 때만 사용됨
HARBOR_NETWORK_SUBNET=192.168.101.0/24

# Harbor 네트워크 게이트웨이
# 예: 192.168.101.1, 172.20.0.1
# ENABLE_HARBOR_NETWORK_IPAM=true일 때만 사용됨
HARBOR_NETWORK_GATEWAY=192.168.101.1

# ----------------------------------------------------------------------------
# 데이터베이스 설정
# ----------------------------------------------------------------------------

# PostgreSQL 데이터베이스 비밀번호
# 보안을 위해 변경 권장
DATABASE_PASSWORD=root123

# 데이터베이스 최대 유휴 연결 수
DATABASE_MAX_IDLE_CONNS=100

# 데이터베이스 최대 오픈 연결 수
DATABASE_MAX_OPEN_CONNS=900

# ----------------------------------------------------------------------------
# HTTPS/TLS 인증서 설정
# ----------------------------------------------------------------------------

# HTTPS 사용 여부 (true/false)
ENABLE_HTTPS=false

# 인증서 국가 코드 (2글자)
CERT_COUNTRY=KR

# 인증서 주/도
CERT_STATE=Seoul

# 인증서 도시
CERT_CITY=Seoul

# 인증서 조직명
CERT_ORGANIZATION=Harbor

# 인증서 부서명
CERT_ORGANIZATIONAL_UNIT=IT

# 인증서 유효 기간 (일)
# 예: 3650 (10년), 1825 (5년), 365 (1년)
CERT_VALIDITY_DAYS=3650

# 추가 SAN (Subject Alternative Name) - 쉼표로 구분
# 예: harbor.example.com,192.168.1.100,10.0.0.1
# 비워두면 HARBOR_HOSTNAME만 사용
CERT_ADDITIONAL_SANS=

# 인증서 저장 디렉토리
CERT_DIR=./harbor-certs

# ----------------------------------------------------------------------------
# Harbor 구성 요소 설치 옵션
# ----------------------------------------------------------------------------

# Trivy 취약점 스캐너 설치 (true/false)
INSTALL_TRIVY=false

# Chart Museum (Helm Chart 저장소) 설치 (true/false)
INSTALL_CHARTMUSEUM=false

# Notary (이미지 서명) 설치 (true/false)
INSTALL_NOTARY=false

# ----------------------------------------------------------------------------
# 패키징 설정
# ----------------------------------------------------------------------------

# 패키지 디렉토리 이름
PACKAGE_DIR=harbor-offline-packages

# 패키지 파일명 접두사
PACKAGE_PREFIX=harbor-offline-rhel96

# ----------------------------------------------------------------------------
# 로그 설정
# ----------------------------------------------------------------------------

# Harbor 로그 레벨
# debug, info, warning, error, fatal
LOG_LEVEL=info

# 로그 파일 로테이션 개수
LOG_ROTATE_COUNT=50

# 로그 파일 최대 크기 (예: 200M, 1G)
LOG_ROTATE_SIZE=200M

# 로그 저장 위치
LOG_LOCATION=/var/log/harbor

# ----------------------------------------------------------------------------
# JobService 설정
# ----------------------------------------------------------------------------

# 최대 동시 작업 수
JOBSERVICE_MAX_JOB_WORKERS=10

# ----------------------------------------------------------------------------
# 프록시 설정 (선택사항)
# ----------------------------------------------------------------------------

# HTTP 프록시 (필요한 경우만 설정)
# 예: http://proxy.example.com:8080
HTTP_PROXY=

# HTTPS 프록시 (필요한 경우만 설정)
# 예: http://proxy.example.com:8080
HTTPS_PROXY=

# 프록시 제외 목록 (쉼표로 구분)
# 예: 127.0.0.1,localhost,.local,.internal
NO_PROXY=127.0.0.1,localhost,.local,.internal

# ----------------------------------------------------------------------------
# 메트릭 설정
# ----------------------------------------------------------------------------

# Prometheus 메트릭 엔드포인트 활성화 (true/false)
ENABLE_METRICS=false

# 메트릭 수집 포트
METRICS_PORT=9090

# 메트릭 경로
METRICS_PATH=/metrics

# ----------------------------------------------------------------------------
# 캐시 설정
# ----------------------------------------------------------------------------

# 캐시 사용 여부 (true/false)
ENABLE_CACHE=false

# 캐시 만료 시간 (시간)
CACHE_EXPIRE_HOURS=24

# ----------------------------------------------------------------------------
# 알림 설정 (선택사항)
# ----------------------------------------------------------------------------

# 이메일 알림 사용 여부 (true/false)
ENABLE_EMAIL_NOTIFICATION=false

# SMTP 서버 주소
SMTP_HOST=smtp.example.com

# SMTP 포트
SMTP_PORT=25

# SMTP 사용자명
SMTP_USERNAME=user@example.com

# SMTP 비밀번호
SMTP_PASSWORD=

# 발신자 이메일 주소
SMTP_FROM=harbor@example.com

# SMTP SSL 사용 여부 (true/false)
SMTP_SSL=false

# SMTP 인증서 검증 무시 (true/false)
SMTP_INSECURE=true

# ----------------------------------------------------------------------------
# 시스템 설정
# ----------------------------------------------------------------------------

# SELinux 비활성화 여부 (true/false)
# true로 설정 시 설치 중 SELinux를 permissive 모드로 변경
DISABLE_SELINUX=true

# 방화벽 규칙 자동 추가 (true/false)
AUTO_CONFIGURE_FIREWALL=true

# systemd 서비스 자동 생성 (true/false)
# Harbor를 시스템 부팅 시 자동 시작하도록 설정
CREATE_SYSTEMD_SERVICE=true

# ----------------------------------------------------------------------------
# 백업 설정
# ----------------------------------------------------------------------------

# 백업 디렉토리
BACKUP_DIR=/root/harbor-backups

# 백업 파일 보관 기간 (일)
BACKUP_RETENTION_DAYS=30

# ----------------------------------------------------------------------------
# 고급 설정
# ----------------------------------------------------------------------------

# Docker 데이터 루트 디렉토리
# 기본값: /var/lib/docker
# 충분한 공간이 있는 경로로 변경 가능
DOCKER_DATA_ROOT=/var/lib/docker

# Docker 로그 드라이버
# json-file, syslog, journald, gelf, fluentd, awslogs, splunk
DOCKER_LOG_DRIVER=json-file

# Docker 로그 최대 크기
DOCKER_LOG_MAX_SIZE=100m

# Docker 로그 최대 파일 수
DOCKER_LOG_MAX_FILE=3

# ----------------------------------------------------------------------------
# 다운로드 설정
# ----------------------------------------------------------------------------

# 다운로드 재시도 횟수
DOWNLOAD_RETRY_COUNT=3

# 다운로드 타임아웃 (초)
DOWNLOAD_TIMEOUT=300

# 병렬 다운로드 수
PARALLEL_DOWNLOADS=4

# ----------------------------------------------------------------------------
# 개발/테스트 설정
# ----------------------------------------------------------------------------

# 디버그 모드 활성화 (true/false)
# 더 상세한 로그 출력
DEBUG_MODE=false

# 드라이 런 모드 (true/false)
# 실제로 설치하지 않고 명령만 출력
DRY_RUN=false

# ----------------------------------------------------------------------------
# 컨테이너 런타임 설정
# ----------------------------------------------------------------------------

# 컨테이너 런타임 선택 (docker/nerdctl/auto)
# docker: Docker Engine 사용
# nerdctl: containerd + nerdctl 사용
# auto: 시스템에 설치된 런타임 자동 감지
CONTAINER_RUNTIME=auto

# Docker 설치 건너뛰기 (true/false)
# nerdctl이나 Docker가 이미 설치된 경우 true로 설정
SKIP_DOCKER_INSTALL=false

# ----------------------------------------------------------------------------
# Kubernetes 설정
# ----------------------------------------------------------------------------

# Kubernetes에 배포 (true/false)
# true: Helm을 사용하여 K8s에 Harbor 배포
# false: Docker Compose 사용
USE_KUBERNETES=false

# Kubernetes 네임스페이스
K8S_NAMESPACE=harbor

# Helm 릴리즈 이름
HELM_RELEASE_NAME=harbor

# Harbor Helm Chart 버전
HARBOR_HELM_VERSION=1.14.0

# StorageClass 이름 (PVC용)
# 빈 값이면 기본 StorageClass 사용
K8S_STORAGE_CLASS=

# Ingress 컨트롤러 사용 (true/false)
USE_INGRESS=true

# Ingress 클래스 이름
INGRESS_CLASS_NAME=nginx

# NodePort 사용 (Ingress를 사용하지 않는 경우)
USE_NODEPORT=false
HARBOR_NODEPORT_HTTP=30002
HARBOR_NODEPORT_HTTPS=30003

# ----------------------------------------------------------------------------
# 참고사항
# ----------------------------------------------------------------------------

# 1. 이 파일을 .env로 복사한 후 수정하세요:
#    cp env.example .env
#
# 2. 주석(#)으로 시작하는 줄은 무시됩니다
#
# 3. 값에 공백이 포함된 경우 따옴표로 감싸세요:
#    CERT_ORGANIZATION="My Company"
#
# 4. 보안 관련 변수는 반드시 변경하세요:
#    - HARBOR_ADMIN_PASSWORD
#    - DATABASE_PASSWORD
#
# 5. 프로덕션 환경에서는 HTTPS를 사용하세요:
#    ENABLE_HTTPS=true
#
# 6. .env 파일은 버전 관리에 포함하지 마세요
#    (.gitignore에 추가됨)
